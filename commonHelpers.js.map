{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('#input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nlet searchQuery = '';\n\nloader.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchQuery = input.value.trim();\n  gallery.innerHTML = '';\n  input.value = '';\n  loader.style.display = 'block';\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none';\n\n  await performSearch();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  await performSearch();\n\n  const cardHeight = getGalleryCardHeight();\n  smoothScrollBy(cardHeight * 2);\n});\n\nasync function performSearch() {\n  const searchParams = new URLSearchParams({\n    key: '41777094-15d23fa072ac8c02efe5e3565',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: 40,\n  });\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n\n    if (!response.data.hits || !response.data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        theme: 'dark',\n        backgroundColor: '#EF4040',\n        titleColor: 'white',\n        messageSize: '16',\n        titleSize: '16',\n        position: 'topRight',\n        maxWidth: 430,\n      });\n    } else {\n      const imgs = response.data.hits.reduce(\n        (\n          html,\n          {\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n          }\n        ) =>\n          html +\n          `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>          \n          <div class=\"description\">\n            <p>Likes:<span>${likes}</span></p>\n            <p>Views:<span>${views}</span></p>\n            <p>Comments:<span>${comments}</span></p>\n            <p>Downloads:<span>${downloads}</span></p>\n          </div> \n        </li>`,\n        ''\n      );\n\n      gallery.innerHTML += imgs;\n\n      let modal = new simpleLightbox('ul.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n\n      modal.refresh();\n\n      // Display Load More button if there are more pages\n      if (response.data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        \n      \n          iziToast.info({\n             message: \"We're sorry, but you've reached the end of search results.\",\n             messageColor: '#FAFAFB',\n             backgroundColor: '#008CBA',\n              position: 'topRight'\n          });\n        \n      }\n      currentPage++;\n    }\n\n    \n  } catch (err) {\n    loader.style.display = 'none';\n    console.log(err);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction getGalleryCardHeight() {\n  const galleryCard = document.querySelector('.gallery-item');\n  const cardHeight = galleryCard\n    ? galleryCard.getBoundingClientRect().height\n    : 0;\n  return cardHeight;\n}\n\nfunction smoothScrollBy(distance) {\n  const initialTime = performance.now();\n  const duration = 600; // Set your preferred duration (in milliseconds)\n  const scroll = currentTime => {\n    const elapsedTime = currentTime - initialTime;\n    window.scrollBy({\n      top: distance * Math.sin((elapsedTime / duration) * (Math.PI / 2)),\n      behavior: 'smooth',\n    });\n    if (elapsedTime < duration) {\n      requestAnimationFrame(scroll);\n    }\n  };\n  requestAnimationFrame(scroll);\n}"],"names":["form","input","gallery","loader","loadMoreBtn","currentPage","searchQuery","event","performSearch","cardHeight","getGalleryCardHeight","smoothScrollBy","searchParams","response","axios","iziToast","imgs","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","simpleLightbox","err","galleryCard","distance","initialTime","duration","scroll","currentTime","elapsedTime"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAc,EACdC,EAAc,GAElBH,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,OAE5BJ,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAC7CA,EAAM,eAAc,EACpBD,EAAcL,EAAM,MAAM,OAC1BC,EAAQ,UAAY,GACpBD,EAAM,MAAQ,GACdE,EAAO,MAAM,QAAU,QACvBE,EAAc,EACdD,EAAY,MAAM,QAAU,OAE5B,MAAMI,EAAa,CACrB,CAAC,EAEDJ,EAAY,iBAAiB,QAAS,SAAY,CAChDD,EAAO,MAAM,QAAU,QACvB,MAAMK,EAAa,EAEnB,MAAMC,EAAaC,IACnBC,EAAeF,EAAa,CAAC,CAC/B,CAAC,EAED,eAAeD,GAAgB,CAC7B,MAAMI,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGN,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMD,EACN,SAAU,EACd,CAAG,EAED,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAC3B,4BAA4BF,GAClC,EAEI,GAAI,CAACC,EAAS,KAAK,MAAQ,CAACA,EAAS,KAAK,KAAK,OAC7CE,EAAS,MAAM,CACb,QACE,2EACF,MAAO,OACP,gBAAiB,UACjB,WAAY,QACZ,YAAa,KACb,UAAW,KACX,SAAU,WACV,SAAU,GAClB,CAAO,MACI,CACL,MAAMC,EAAOH,EAAS,KAAK,KAAK,OAC9B,CACEI,EACA,CACE,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IAEDP,EACA;AAAA,0CACgCE;AAAA,8CACID,WAAsBE;AAAA;AAAA;AAAA,6BAGvCC;AAAA,6BACAC;AAAA,gCACGC;AAAA,iCACCC;AAAA;AAAA,eAGzB,EACR,EAEMtB,EAAQ,WAAac,EAET,IAAIS,EAAe,eAAgB,CAC7C,aAAc,IACd,aAAc,KACtB,CAAO,EAEK,QAAO,EAGTZ,EAAS,KAAK,UAAYR,EAAc,GAC1CD,EAAY,MAAM,QAAU,SAE5BA,EAAY,MAAM,QAAU,OAG1BW,EAAS,KAAK,CACX,QAAS,6DACT,aAAc,UACd,gBAAiB,UAChB,SAAU,UACxB,CAAW,GAGLV,GACD,CAGF,OAAQqB,EAAP,CACAvB,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIuB,CAAG,CACnB,QAAY,CACRvB,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASO,GAAuB,CAC9B,MAAMiB,EAAc,SAAS,cAAc,eAAe,EAI1D,OAHmBA,EACfA,EAAY,sBAAqB,EAAG,OACpC,CAEN,CAEA,SAAShB,EAAeiB,EAAU,CAChC,MAAMC,EAAc,YAAY,MAC1BC,EAAW,IACXC,EAASC,GAAe,CAC5B,MAAMC,EAAcD,EAAcH,EAClC,OAAO,SAAS,CACd,IAAKD,EAAW,KAAK,IAAKK,EAAcH,GAAa,KAAK,GAAK,EAAE,EACjE,SAAU,QAChB,CAAK,EACGG,EAAcH,GAChB,sBAAsBC,CAAM,CAElC,EACE,sBAAsBA,CAAM,CAC9B"}